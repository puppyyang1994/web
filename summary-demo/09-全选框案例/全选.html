<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
          margin: 0;
          padding: 0;
        }
    
        table {
          border-collapse: collapse;
          border-spacing: 0;
          border: 1px solid #c0c0c0;
          width: 500px;
          margin: 100px auto;
          text-align: center;
        }
    
        th {
          background-color: #09c;
          font: bold 16px "微软雅黑";
          color: #fff;
          height: 24px;
        }
    
        td {
          border: 1px solid #d0d0d0;
          color: #404060;
          padding: 10px;
        }
    
        .allCheck {
          width: 80px;
        }
      </style>
</head>
<body>
    <table>
        <tr>
          <th class="allCheck">
            <input type="checkbox" name="" id="checkAll"> <span class="all">全选</span>
          </th>
          <th>商品</th>
          <th>商家</th>
          <th>价格</th>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck">
          </td>
          <td>小米手机</td>
          <td>小米</td>
          <td>￥1999</td>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck">
          </td>
          <td>小米净水器</td>
          <td>小米</td>
          <td>￥4999</td>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck">
          </td>
          <td>小米电视</td>
          <td>小米</td>
          <td>￥5999</td>
        </tr>
      </table>
      <script>
        let checkAll = document.getElementById('checkAll');
        let cks = document.querySelectorAll('.ck');
        let span = document.querySelector('span');
        // 全选复选框点击，可以得到当前按钮的 checked
        checkAll.addEventListener('click', function(){
            // 要把全选框的状态给下面三个小按钮 checked 的状态  true  false
            
            // 三个小按钮在伪数组里 所以要通过遍历的方式依次赋值
            for(let i = 0; i< cks.length; i++){
                cks[i].checked = checkAll.checked;
            }
            // 当按钮处于全选状态 则文字改为取消
            if(checkAll.checked === true){
                span.innerHTML = '取消';        
            }else {
                span.innerHTML = '全选';
            }
        })
        // 同时给多个元素绑定相同事件
        for(let i = 0; i < cks.length; i++){
          // 绑定事件 要注意 这里要给每一个小按钮绑定事件
            cks[i].addEventListener('click', function(){
              // 只要点击任何一个小按钮，都要遍历所有的小按钮  
                for(let j = 0; j<cks.length; j++){
                  // 看看是不是有人没有选中
                    if(cks[j].checked === false){
                      // 如果有false 则退出循环 结束函数
                    checkAll.checked = false;
                    span.innerHTML = '全选';
                    return;
                }
                }
                //  当我们的循环结束，如果代码走到这里，说明没有false，都被选中了，则全选按钮要选中
               checkAll.checked = true;
               span.innerHTML = '取消'
            })
           
        }
            
        
      </script>
</body>
</html>