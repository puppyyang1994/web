<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <div class="app-container">
        <!-- 顶部banner -->
        <div class="banner-box">
            <img src="./img/fruit.jpg" alt="">
        </div>
        <!-- 导航栏 -->
        <div class="nav-box">
            <div class="breadcrumb">
                <span>🏠</span>
                /
                <span>水果列表</span>
            </div>
        </div>
        <!-- table栏 -->
        <div class="main">
            <div class="table">
                <!-- 头部 -->
                <div class="thead">
                    <div class="tr">
                        <div class="th">名字</div>
                        <div class="th">图片</div>
                        <div class="th">简介</div>
                        <div class="th">操作</div>
                    </div>
                </div>
                <!-- 列表主体 -->
                <div class="tbody">
                    <div class="tr">
                        <div class="td">火龙果</div>
                        <div class="td"><img src="./img/火龙果.png" alt=""></div>
                        <div class="td">
                            <span class="my-input_inner count">一种好吃的水果</span>
                        </div>
                        <div class="td">
                            <button class="info">查看详情</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        // let xhr = new XMLHttpRequest()
        // xhr.open('get', 'https://autumnfish.cn/fruitApi/fruits')
        // xhr.send()
        // xhr.onload = function () {
        //     console.log(JSON.parse(xhr.responseText));
        //     let res = JSON.parse(xhr.responseText)
        //     // 渲染数据
        //     renderData(res.data)
        // }


        // url 路径传参的流程总结： A页面跳转到B页面
        /* 1. 给按钮添加行内JS（动态新增按钮不能直接获取 但是可以注册行内事件
            2. 在url路径的后面拼接你的参数（页面跳转只由路径决定 参数影响跳转
            <button onclick = " location.href = ' url?id=参数值 ' "></button>
            3.在B页面解析location.search参数
            let id = location.search.split('=')[1] */


        // 用axios来实现 页面一进来 就发送ajax请求水果列表
        axios({
            url: 'https://autumnfish.cn/fruitApi/fruits',
            method: 'get'
        }).then(res => {
            renderData(res.data.data)
        })

        // 封装页面渲染函数
        const renderData = arr => {
            document.querySelector('.tbody').innerHTML = arr.map(item => `
            <div class="tr">
                        <div class="td">${item.name}</div>
                        <div class="td"><img src="${item.icon}" alt=""></div>
                        <div class="td">
                            <span class="my-input_inner count">${item.info}</span>
                        </div>
                        <div class="td">
                            
                            <button class="info" onclick="location.href='./details.html?id=${item.id}'">查看详情</button>
                        </div>
                    </div>
            `).join('')
        }
// 动态新增的元素是无法直接注册事件的 解决方案有两种：
// 最常用 事件委托技术
// 偶尔用 行内式JS注册事件（事件处理只有一行代码时）
// 注意这里：动态新增按钮不能直接获取 但是可以注册行内事件
        // 渲染数据功能可以单独封装到函数中。 这样可以让你的代码结构看起来更加清晰，也便于维护
    </script>
</body>

</html>