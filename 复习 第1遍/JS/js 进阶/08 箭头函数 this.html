<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /*  // 以前的this指向 谁调用这个函数 this就指向谁
         console.log(this);//window
         //普通函数
         function fn() {
             console.log(this); //window
         }
         window.fn()
         //对象方法里的this
         const obj = {
             name: 'andy',
             sayHi: function () {
                 console.log(this);//obj
             }
         }
         obj.sayHi()
 
         // 箭头函数 this 是上一层作用域的this指向
         const fn6 = () => {
             console.log(this);
         }
         fn6()
         const obj2 = {
             name: 'pink',
             sayHi: () => {
                 console.log(this);//window
             }
         }
         obj2.sayHi() */

        /*  const obj6 = {
             uname: 'puppy',
             sayHi: function () {
                 console.log(this);//obj6
                 let i = 10
                 const count = () => {
                     console.log(this);//obj6
                 }
                 count()
             }
 
         }
         obj6.sayHi() */
        //  箭头函数没有自己的this,内部的this是定义时上层作用域中的this,也就是说箭头函数this指向时固定的，但普通函数this指向是可以改变的
        /*  function foo() {
             setTimeout(() => {
                 console.log('id:', this.id);
             }, 100);
         }
         let id = 21;
         foo.call({ id: 42 }) //把foo的this指向变到了对象{id:42}
         // call 就是用来动态改变对象this的指向 本来箭头函数指向的是foo的this foo本来是window 但是call改变了 */

        // 回调函数分别为箭头函数和普通函数的例子
        function Timer() {
            this.s1 = 0;
            this.s2 = 0;
            // 箭头函数
            setInterval(() => this.s1++, 1000);
            // 普通函数
            setInterval(function () {
                this.s2++;
            }, 1000)
        }
        let timer = new Timer();
        setTimeout(() => console.log('s1:', timer.s1), 3100) //指向Timer函数
        setTimeout(() => console.log('s2:', timer.s2), 3100) //指向window
    </script>
</body>

</html>